import{_ as s,c as a,o as n,d as l}from"./app.3e6d6102.js";var o="/docs-golang-zh/docker-use-k8s/image-20221217181444824.png",p="/docs-golang-zh/docker-use-k8s/image-20221217183752106.png",e="/docs-golang-zh/docker-use-k8s/image-20221217203824824.png",t="/docs-golang-zh/docker-use-k8s/image-20221217204230802.png";const k=JSON.parse('{"title":"docker\u4E2D\u4F7F\u7528k8s","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u542F\u7528Kubernetes","slug":"\u542F\u7528kubernetes"},{"level":2,"title":"\u67E5\u770B\u662F\u5426\u5B89\u88C5\u6210\u529F","slug":"\u67E5\u770B\u662F\u5426\u5B89\u88C5\u6210\u529F"},{"level":2,"title":"\u90E8\u7F72 Kubernetes Dashboard","slug":"\u90E8\u7F72-kubernetes-dashboard"},{"level":2,"title":"\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237\uFF0C\u751F\u6210 Token","slug":"\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237\uFF0C\u751F\u6210-token"},{"level":2,"title":"\u6E05\u7406\u548C\u540E\u7EED\u6B65\u9AA4","slug":"\u6E05\u7406\u548C\u540E\u7EED\u6B65\u9AA4"}],"relativePath":"zh/kubernetes/docker-use-k8s.md"}'),c={name:"zh/kubernetes/docker-use-k8s.md"},r=l('<h1 id="docker-user-k8s" tabindex="-1">docker\u4E2D\u4F7F\u7528k8s <a class="header-anchor" href="#docker-user-k8s" aria-hidden="true">#</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u5168\u7A0B\u57FA\u4E8EMac\u73AF\u5883\u642D\u5EFA</p></div><h2 id="\u542F\u7528kubernetes" tabindex="-1">\u542F\u7528Kubernetes <a class="header-anchor" href="#\u542F\u7528kubernetes" aria-hidden="true">#</a></h2><p>\u5728Docker for Mac\u4E2D\u542F\u7528Kubernetes,\u7A0D\u7B49\u4F1A\uFF1A</p><p><img src="'+o+`" alt="image-20221217181444824"></p><h2 id="\u67E5\u770B\u662F\u5426\u5B89\u88C5\u6210\u529F" tabindex="-1">\u67E5\u770B\u662F\u5426\u5B89\u88C5\u6210\u529F <a class="header-anchor" href="#\u67E5\u770B\u662F\u5426\u5B89\u88C5\u6210\u529F" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl cluster-info</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl get nodes</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl describe node</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u63D0\u793A<code>command not found: kubectl</code>\uFF0C\u5219\u8FDB\u884C\u5982\u4E0B\u64CD\u4F5C\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">//\u4E0B\u8F7D kubectl:https://kubernetes.io/docs/tasks/tools/</span><span style="color:#676E95;font-style:italic;">#tabset-2</span></span>
<span class="line"><span style="color:#A6ACCD;">curl -LO </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://dl.k8s.io/release/v1.24.0/bin/darwin/amd64/kubectl</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod +x ./kubectl</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo mv ./kubectl /usr/local/bin/kubectl</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo chown root: /usr/local/bin/kubectl</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl version --client</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u670D\u52A1\u5668\u548C\u5BA2\u6237\u7AEF\u90FD\u5FC5\u987B\u8FD0\u884C 1.24 \u6216\u66F4\u65B0\u7248\u672C\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl version --output=json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">clientVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">major</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">minor</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">24</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gitVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">v1.24.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gitCommit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">4ce5a8954017644c5420bae81d72b09b735c21f0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gitTreeState</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">clean</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buildDate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2022-05-03T13:46:05Z</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">goVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">go1.18.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">compiler</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">platform</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">darwin/amd64</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">kustomizeVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">v4.5.4</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">serverVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">major</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">minor</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">24</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gitVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">v1.24.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gitCommit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">4ce5a8954017644c5420bae81d72b09b735c21f0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gitTreeState</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">clean</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buildDate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2022-05-03T13:38:19Z</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">goVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">go1.18.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">compiler</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">platform</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">linux/arm64</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></div><h2 id="\u90E8\u7F72-kubernetes-dashboard" tabindex="-1">\u90E8\u7F72 Kubernetes Dashboard <a class="header-anchor" href="#\u90E8\u7F72-kubernetes-dashboard" aria-hidden="true">#</a></h2><blockquote><p>\u542F\u52A8 Dashboard</p></blockquote><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u5F00\u542F\u672C\u673A\u8BBF\u95EE\u4EE3\u7406\uFF0C\u9ED8\u8BA4\u76D1\u542C 8001 \u7AEF\u53E3</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl proxy</span></span>
<span class="line"></span></code></pre></div><p>\u8BBF\u95EE\u5982\u4E0B\u94FE\u63A5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</span></span>
<span class="line"></span></code></pre></div><p><img src="`+p+`" alt="image-20221217183752106"></p><h2 id="\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237\uFF0C\u751F\u6210-token" tabindex="-1">\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237\uFF0C\u751F\u6210 Token <a class="header-anchor" href="#\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237\uFF0C\u751F\u6210-token" aria-hidden="true">#</a></h2><p>\u9996\u5148\uFF0C\u521B\u5EFA\u6587\u4EF6 dashboard-admin.yml\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">apiVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v1</span></span>
<span class="line"><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ServiceAccount</span></span>
<span class="line"><span style="color:#F07178;">metadata</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">admin-user</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">namespace</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubernetes-dashboard</span></span>
<span class="line"><span style="color:#FFCB6B;">---</span></span>
<span class="line"><span style="color:#F07178;">apiVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ClusterRoleBinding</span></span>
<span class="line"><span style="color:#F07178;">metadata</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">admin-user</span></span>
<span class="line"><span style="color:#F07178;">roleRef</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">apiGroup</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rbac.authorization.k8s.io</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ClusterRole</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cluster-admin</span></span>
<span class="line"><span style="color:#F07178;">subjects</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ServiceAccount</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">admin-user</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">namespace</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubernetes-dashboard</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237\uFF0C\u751F\u6210 Token</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># \u521B\u5EFA ServiceAccount admin-user \u5E76\u7ED1\u5B9A\u96C6\u7FA4\u7BA1\u7406\u5458\u6743\u9650</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl apply -f dashboard-adminuser.yaml</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u83B7\u53D6\u767B\u9646 token</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl -n kubernetes-dashboard create token admin-user</span></span>
<span class="line"></span></code></pre></div><p>token\u5185\u5BB9\u5982\u4E0B\uFF1A</p><p><img src="`+e+'" alt="image-20221217203824824"></p><p>\u7136\u540E\u8FD0\u884C<code>kubectl proxy</code>\u547D\u4EE4\uFF0C\u8F93\u5165token,\u6210\u529F\u8FDB\u5165Dashboard\u9875\u9762\uFF1A</p><p><img src="'+t+`" alt="image-20221217204230802"></p><h2 id="\u6E05\u7406\u548C\u540E\u7EED\u6B65\u9AA4" tabindex="-1">\u6E05\u7406\u548C\u540E\u7EED\u6B65\u9AA4 <a class="header-anchor" href="#\u6E05\u7406\u548C\u540E\u7EED\u6B65\u9AA4" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">kubectl -n kubernetes-dashboard delete serviceaccount admin-user</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl -n kubernetes-dashboard delete clusterrolebinding admin-user</span></span>
<span class="line"></span></code></pre></div>`,27),D=[r];function y(C,i,F,A,u,d){return n(),a("div",null,D)}var q=s(c,[["render",y]]);export{k as __pageData,q as default};
